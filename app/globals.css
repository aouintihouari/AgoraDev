@import "tailwindcss";
@import "tw-animate-css";

@plugin "@tailwindcss/typography";

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }

  :root {
    --background: oklch(0.9779 0.0042 56.3756);
    --foreground: oklch(0.2178 0 0);
    --card: oklch(0.9779 0.0042 56.3756);
    --card-foreground: oklch(0.2178 0 0);
    --popover: oklch(0.9779 0.0042 56.3756);
    --popover-foreground: oklch(0.2178 0 0);
    --primary: oklch(0.465 0.147 24.9381);
    --primary-foreground: oklch(1 0 0);
    --secondary: oklch(0.9625 0.0385 89.0943);
    --secondary-foreground: oklch(0.4847 0.1022 75.1153);
    --muted: oklch(0.9431 0.0068 53.4442);
    --muted-foreground: oklch(0.4444 0.0096 73.639);
    --accent: oklch(0.9619 0.058 95.6174);
    --accent-foreground: oklch(0.3958 0.1331 25.723);
    --destructive: oklch(0.4437 0.1613 26.8994);
    --destructive-foreground: oklch(1 0 0);
    --border: oklch(0.9355 0.0324 80.9937);
    --input: oklch(0.9355 0.0324 80.9937);
    --ring: oklch(0.465 0.147 24.9381);
    --chart-1: oklch(0.5054 0.1905 27.5181);
    --chart-2: oklch(0.465 0.147 24.9381);
    --chart-3: oklch(0.3958 0.1331 25.723);
    --chart-4: oklch(0.5553 0.1455 48.9975);
    --chart-5: oklch(0.4732 0.1247 46.2007);
    --sidebar: oklch(0.9431 0.0068 53.4442);
    --sidebar-foreground: oklch(0.2178 0 0);
    --sidebar-primary: oklch(0.465 0.147 24.9381);
    --sidebar-primary-foreground: oklch(1 0 0);
    --sidebar-accent: oklch(0.9619 0.058 95.6174);
    --sidebar-accent-foreground: oklch(0.3958 0.1331 25.723);
    --sidebar-border: oklch(0.9355 0.0324 80.9937);
    --sidebar-ring: oklch(0.465 0.147 24.9381);

    --logo-primary: oklch(56.717% 0.17266 24.485);
    --logo-secondary: oklch(64.117% 0.12008 67.907);
    /* Font definitions */
    --font-sans: Poppins, sans-serif;
    --font-serif: Libre Baskerville, serif;
    --font-mono: IBM Plex Mono, monospace;

    --radius: 0.375rem;

    /* Shadows from new theme */
    --shadow-2xs: 1px 1px 16px -2px hsl(0 63% 18% / 0.06);
    --shadow-xs: 1px 1px 16px -2px hsl(0 63% 18% / 0.06);
    --shadow-sm: 1px 1px 16px -2px hsl(0 63% 18% / 0.12), 1px 1px 2px -3px hsl(0 63% 18% / 0.12);
    --shadow: 1px 1px 16px -2px hsl(0 63% 18% / 0.12), 1px 1px 2px -3px hsl(0 63% 18% / 0.12);
    --shadow-md: 1px 1px 16px -2px hsl(0 63% 18% / 0.12), 1px 2px 4px -3px hsl(0 63% 18% / 0.12);
    --shadow-lg: 1px 1px 16px -2px hsl(0 63% 18% / 0.12), 1px 4px 6px -3px hsl(0 63% 18% / 0.12);
    --shadow-xl: 1px 1px 16px -2px hsl(0 63% 18% / 0.12), 1px 8px 10px -3px hsl(0 63% 18% / 0.12);
    --shadow-2xl: 1px 1px 16px -2px hsl(0 63% 18% / 0.3);

    --radius: 0.5rem;
  }

  .dark {
    --background: oklch(0.2161 0.0061 56.0434);
    --foreground: oklch(0.9699 0.0013 106.4238);
    --card: oklch(0.2685 0.0063 34.2976);
    --card-foreground: oklch(0.9699 0.0013 106.4238);
    --popover: oklch(0.2685 0.0063 34.2976);
    --popover-foreground: oklch(0.9699 0.0013 106.4238);
    --primary: oklch(0.5054 0.1905 27.5181);
    --primary-foreground: oklch(0.9779 0.0042 56.3756);
    --secondary: oklch(0.4732 0.1247 46.2007);
    --secondary-foreground: oklch(0.9619 0.058 95.6174);
    --muted: oklch(0.2291 0.006 56.0708);
    --muted-foreground: oklch(0.8687 0.0043 56.366);
    --accent: oklch(0.5553 0.1455 48.9975);
    --accent-foreground: oklch(0.9619 0.058 95.6174);
    --destructive: oklch(0.6368 0.2078 25.3313);
    --destructive-foreground: oklch(1 0 0);
    --border: oklch(0.3741 0.0087 67.5582);
    --input: oklch(0.3741 0.0087 67.5582);
    --ring: oklch(0.5054 0.1905 27.5181);
    --chart-1: oklch(0.7106 0.1661 22.2162);
    --chart-2: oklch(0.6368 0.2078 25.3313);
    --chart-3: oklch(0.5771 0.2152 27.325);
    --chart-4: oklch(0.8369 0.1644 84.4286);
    --chart-5: oklch(0.7686 0.1647 70.0804);
    --sidebar: oklch(0.2161 0.0061 56.0434);
    --sidebar-foreground: oklch(0.9699 0.0013 106.4238);
    --sidebar-primary: oklch(0.5054 0.1905 27.5181);
    --sidebar-primary-foreground: oklch(0.9779 0.0042 56.3756);
    --sidebar-accent: oklch(0.5553 0.1455 48.9975);
    --sidebar-accent-foreground: oklch(0.9619 0.058 95.6174);
    --sidebar-border: oklch(0.3741 0.0087 67.5582);
    --sidebar-ring: oklch(0.5054 0.1905 27.5181);

    --logo-primary: oklch(0.65 0.1248 22.78);
    --logo-secondary: oklch(0.7386 0.0773 78.76);
  }
}

@custom-variant dark (&:is(.dark *));

@theme {
  /* Mapping Colors */
  --color-primary-100: var(--primary-foreground); /* Light accent */
  --color-primary-500: var(--primary); /* Main Brand Color (Red/Brown) */

  --color-logo-primary: var(--logo-primary);
  --color-logo-secondary: var(--logo-secondary);

  /* Dark palette mapping */
  --color-dark-100: var(--background); /* Main Dark BG */
  --color-dark-200: var(--card); /* Card Dark BG */
  --color-dark-300: var(--popover); /* Popover Dark */
  --color-dark-400: var(--muted); /* Muted Dark */
  --color-dark-500: var(--sidebar); /* Sidebar Dark */

  /* Light palette mapping */
  --color-light-400: var(--muted-foreground);
  --color-light-500: var(--secondary-foreground);
  --color-light-700: var(--border);
  --color-light-800: var(--secondary);
  --color-light-850: var(--card);
  --color-light-900: var(--background); /* Main Light BG */

  --color-link-100: var(--primary); /* Links follow primary theme */

  /* Radius mapping */
  --radius-2: 8px;
  --radius-1_5: 6px;
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Shadows mapping - Using your new shadow variables */
  --shadow-light-100: var(--shadow-sm);
  --shadow-light-200: var(--shadow-md);
  --shadow-light-300: var(--shadow-lg);
  --shadow-dark-100: var(--shadow-sm);
  --shadow-dark-200: var(--shadow-md);

  /* Background Images */
  --background-image-auth-dark: url("/images/auth-dark.png");
  --background-image-auth-light: url("/images/auth-light.png");

  --breakpoint-xs: 420px;

  /* --- FONTS MAPPING --- */
  --font-inter: var(--font-sans); /* Poppins */
  --font-space-grotesk: var(--font-serif); /* Libre Baskerville (Titles) */
  --font-mono: var(--font-mono); /* IBM Plex Mono */
}

/* --- 3. THEME INLINE --- */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);
  --font-serif: var(--font-serif);

  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  --shadow-2xs: var(--shadow-2xs);
  --shadow-xs: var(--shadow-xs);
  --shadow-sm: var(--shadow-sm);
  --shadow: var(--shadow);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --shadow-2xl: var(--shadow-2xl);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
}

@utility background-light850_dark100 {
  @apply bg-light-850 dark:bg-dark-100;
}

@utility background-light900_dark200 {
  @apply bg-light-900 dark:bg-dark-200;
}

@utility background-light900_dark300 {
  @apply bg-light-900 dark:bg-dark-300;
}

@utility background-light800_darkgradient {
  @apply bg-light-800 dark:dark-gradient;
}

@utility background-light800_dark400 {
  @apply bg-light-800! dark:bg-dark-400!;
  @apply bg-light-800 dark:bg-dark-400;
}

@utility background-light700_dark400 {
  @apply bg-light-700 dark:bg-dark-400;
}

@utility background-light700_dark300 {
  @apply bg-light-700 dark:bg-dark-300;
}

@utility background-light800_dark300 {
  @apply bg-light-800! dark:bg-dark-300!;
}

@utility background-light800_dark200 {
  @apply bg-light-800 dark:bg-dark-200;
}

@utility background-dark400_light900 {
  @apply dark:bg-dark-400! bg-light-900!;
}

@utility text-dark100_light900 {
  @apply text-dark-100! dark:text-light-900!;
}

@utility text-dark200_light900 {
  @apply text-dark-200 dark:text-light-900;
}

@utility text-dark200_light800 {
  @apply text-dark-200! dark:text-light-800!;
}

@utility text-dark300_light700 {
  @apply text-dark-300 dark:text-light-700;
}

@utility text-dark400_light700 {
  @apply text-dark-400 dark:text-light-700;
}

@utility text-dark500_light700 {
  @apply text-dark-500! dark:text-light-700!;
}

@utility text-dark500_light500 {
  @apply text-dark-500 dark:text-light-500;
}

@utility text-dark500_light400 {
  @apply text-dark-500 dark:text-light-400;
}

@utility text-dark300_light900 {
  @apply text-dark-300! dark:text-light-900!;
}

@utility text-dark400_light800 {
  @apply text-dark-400 dark:text-light-800;
}

@utility text-light400_light500 {
  @apply text-light-400! dark:text-light-500!;
  @apply text-light-400! dark:text-light-500!;
}

@utility text-dark400_light500 {
  @apply text-dark-400 dark:text-light-500;
}

@utility text-dark400_light900 {
  @apply text-dark-400! dark:text-light-900!;
}

@utility light-border {
  @apply border-light-800 dark:border-dark-300;
}

@utility light-border-2 {
  @apply border-light-700! dark:border-dark-400!;
}

/* TYPOGRAPHY */
@utility h1-bold {
  @apply font-serif text-[30px] leading-[42px] font-bold tracking-tighter; /* Added serif */
}

@utility h2-bold {
  @apply font-serif text-[24px] leading-[31.2px] font-bold;
}

@utility h2-semibold {
  @apply font-serif text-[24px] leading-[31.2px] font-semibold;
}

@utility h3-bold {
  @apply font-serif text-[20px] leading-[26px] font-bold;
}

@utility h3-semibold {
  @apply font-serif text-[20px] leading-[24.8px] font-semibold;
}

@utility base-medium {
  @apply text-[18px] leading-[25.2px] font-medium;
}

@utility base-semibold {
  @apply text-[18px] leading-[25.2px] font-semibold;
}

@utility base-bold {
  @apply text-[18px] leading-[140%] font-bold;
}

@utility paragraph-regular {
  @apply text-[16px] leading-[22.4px] font-normal;
}

@utility paragraph-medium {
  @apply text-[16px] leading-[22.4px] font-medium;
}

@utility paragraph-semibold {
  @apply text-[16px] leading-[20.8px] font-semibold;
}

@utility body-regular {
  @apply text-[14px] leading-[19.6px] font-normal;
}

@utility body-medium {
  @apply text-[14px] leading-[18.2px] font-medium;
}

@utility body-semibold {
  @apply text-[14px] leading-[18.2px] font-semibold;
}

@utility body-bold {
  @apply text-[14px] leading-[18.2px] font-bold;
}

@utility small-regular {
  @apply text-[12px] leading-[15.6px] font-normal;
}

@utility small-medium {
  @apply text-[12px] leading-[15.6px] font-medium;
}

@utility small-semibold {
  @apply text-[12px] leading-[15.6px] font-semibold;
}

@utility subtle-medium {
  @apply text-[10px]! leading-[13px]! font-medium!;
}

@utility subtle-regular {
  @apply text-[10px] leading-[13px] font-normal;
}

@utility placeholder {
  @apply placeholder:text-light-400 dark:placeholder:text-light-500;
}

@utility invert-colors {
  @apply invert dark:invert-0;
}

@utility shadow-light100_dark100 {
  @apply shadow-light-100 dark:shadow-dark-100;
}

@utility shadow-light100_darknone {
  @apply shadow-light-100 dark:shadow-none;
}

@utility primary-gradient {
  background: linear-gradient(129deg, var(--primary) 0%, var(--chart-1) 100%);
}

@utility dark-gradient {
  background: linear-gradient(232deg, var(--background) 0%, var(--card) 100%);
  background: linear-gradient(232deg, var(--background) 0%, var(--card) 100%);
}

@utility light-gradient {
  background: linear-gradient(132deg, var(--background) 0%, var(--secondary) 100%);
}

@utility primary-text-gradient {
  background: linear-gradient(129deg, var(--primary) 0%, var(--chart-1) 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

@utility flex-center {
  @apply flex items-center justify-center;
}

@utility flex-between {
  @apply flex items-center justify-between;
}

@utility flex-start {
  @apply flex items-center justify-start;
}

@utility card-wrapper {
  @apply bg-light-900 dark:dark-gradient shadow-light-100 dark:shadow-dark-100;
}

@utility btn {
  @apply bg-light-800! dark:bg-dark-300!;
}

@utility btn-secondary {
  @apply bg-light-800! dark:bg-dark-400!;
}

@utility btn-tertiary {
  @apply bg-light-700! dark:bg-dark-300!;
}

@utility no-focus {
  @apply focus-visible:ring-0! focus-visible:ring-transparent! focus-visible:ring-offset-0!;
}

@utility markdown {
  @apply prose prose-p:my-2 prose-ol:my-0 prose-ul:my-0 dark:prose-p:text-light-700 dark:prose-ol:text-light-700 dark:prose-ul:text-light-500 dark:prose-strong:text-white dark:prose-headings:text-white prose-headings:text-dark-400 prose-h1:text-dark-300 prose-h2:text-dark-300 prose-p:text-dark-500 prose-ul:text-dark-500 prose-ol:text-dark-500 max-w-full;
}

@utility markdown-editor {
  @apply prose prose-p:m-0 dark:prose-headings:text-white prose-headings:text-dark-400 prose-p:text-dark-500 dark:prose-p:text-light-700 prose-ul:text-dark-500 dark:prose-ul:text-light-700 prose-ol:text-dark-500 dark:prose-ol:text-light-700 dark:prose-strong:text-white prose-blockquote:text-dark-500 dark:prose-blockquote:text-light-700 max-w-full;
}

@utility tab {
  @apply dark:bg-dark-400! bg-light-800! text-light-500! dark:data-[state=active]:bg-dark-300! data-[state=active]:bg-primary-100! data-[state=active]:text-primary-500! min-h-full!;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 3px;
  height: 3px;
  border-radius: 2px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: var(--background);
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: var(--muted-foreground);
  border-radius: 50px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: var(--primary);
}

/* Hide scrollbar for Chrome, Safari and Opera */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

.active-theme {
  filter: invert(53%) sepia(98%) saturate(3332%) hue-rotate(0deg) brightness(104%) contrast(106%) !important;
}

.hash-span {
  margin-top: -140px;
  padding-bottom: 140px;
  display: block;
}

.mdxeditor-toolbar {
  background: var(--background) !important;
}

.dark .mdxeditor-toolbar {
  background: var(--card) !important;
}

.dark .mdxeditor-toolbar button svg {
  color: var(--muted-foreground) !important;
}

.dark .mdxeditor-toolbar button:hover svg {
  color: var(--foreground) !important;
}

.dark .mdxeditor-toolbar [role="separator"] {
  border-color: var(--border) !important;
}

.markdown a {
  color: var(--primary);
}

.markdown a,
code {
  overflow-wrap: break-word;
  word-wrap: break-word;

  -ms-word-break: break-all;
  /* This is the dangerous one in WebKit, as it breaks things wherever */
  word-break: break-all;
  /* Instead use this non-standard one: */
  word-break: break-word;

  -ms-hyphens: auto;
  -moz-hyphens: auto;
  -webkit-hyphens: auto;
  hyphens: auto;

  padding: 2px;
  color: var(--primary) !important;
}

.markdown pre {
  display: grid;
  width: 100%;
}

.markdown pre code {
  width: 100%;
  display: block;
  overflow-x: auto;

  color: inherit !important;
}

[data-lexical-editor="true"] {
  height: 350px !important;
  overflow-y: auto !important;
}

[data-bright-mode="dark"]:not(html.light [data-bright-mode="dark"]),
[data-bright-mode="light"]:not(:not(html.light [data-bright-mode="light"])) {
  display: grid !important;
  width: 100% !important;
}
